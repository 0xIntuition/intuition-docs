---
id: writes
title: Writes
sidebar_label: Writes
sidebar_position: 3
description: Guide to write data using GraphQL mutations in the Intuition API
---

# Writes

## Understanding Mutations vs Smart Contract Operations

The Intuition GraphQL API provides mutations for **off-chain operations** like uploading metadata to IPFS. For **on-chain operations** like creating atoms, triples, and positions, you must use the [Intuition SDK](/docs/intuition-sdk/installation-and-setup) or interact directly with the smart contracts.

:::info GraphQL vs Smart Contracts
**GraphQL mutations** handle:
- Uploading metadata to IPFS (pinThing, pinPerson, pinOrganization)

**Smart contract operations** handle:
- Creating atoms
- Creating triples
- Taking positions (depositing/redeeming)
- All on-chain state changes

Use the [SDK](/docs/intuition-sdk/installation-and-setup) for smart contract interactions.
:::

## Available Mutations

### IPFS & Metadata Mutations

| Mutation | Description | Documentation |
|----------|-------------|---------------|
| `pinThing` | Pin Thing metadata to IPFS | [Pin Thing](/docs/graphql-api/mutations/pin-thing) |
| `pinPerson` | Pin Person metadata to IPFS | [Pin Person](/docs/graphql-api/mutations/pin-person) |
| `pinOrganization` | Pin Organization metadata to IPFS | [Pin Organization](/docs/graphql-api/mutations/pin-organization) |
| `uploadImage` | Upload base64 image to IPFS | [Upload Image](/docs/graphql-api/mutations/images/upload-image) |
| `uploadImageFromUrl` | Upload image from URL to IPFS | [Upload from URL](/docs/graphql-api/mutations/images/upload-image-from-url) |
| `uploadJsonToIpfs` | Upload JSON metadata to IPFS | [Upload JSON](/docs/graphql-api/mutations/images/upload-json-to-ipfs) |

:::tip Read-Only Operations
Chart and PnL operations are **queries**, not mutations. See:
- [PnL Queries](/docs/graphql-api/queries/pnl/overview) - Profit & Loss tracking
- [Chart Queries](/docs/graphql-api/queries/charts/overview) - Chart generation
:::

## Pin Mutations

### pinThing Mutation

Pin a Thing entity to IPFS:

```graphql
mutation PinThing($thing: PinThingInput!) {
  pinThing(thing: $thing) {
    hash
    name
    size
  }
}
```

**Variables:**
```json
{
  "thing": {
    "name": "Ethereum",
    "description": "A decentralized blockchain platform",
    "image": "ipfs://QmXnnyufdzAWL5CqZ2RnSNgPbvCc1ALT73s6epPrRnZ1Xy",
    "url": "https://ethereum.org"
  }
}
```

### pinPerson Mutation

Pin a Person entity to IPFS:

```graphql
mutation PinPerson($person: PinPersonInput!) {
  pinPerson(person: $person) {
    hash
    name
    size
  }
}
```

**Variables:**
```json
{
  "person": {
    "name": "Vitalik Buterin",
    "description": "Co-founder of Ethereum",
    "email": "vitalik@ethereum.org",
    "identifier": "vitalik.eth",
    "image": "ipfs://Qm...",
    "url": "https://vitalik.ca"
  }
}
```

### pinOrganization Mutation

Pin an Organization entity to IPFS:

```graphql
mutation PinOrganization($organization: PinOrganizationInput!) {
  pinOrganization(organization: $organization) {
    hash
    name
    size
  }
}
```

**Variables:**
```json
{
  "organization": {
    "name": "Ethereum Foundation",
    "description": "Non-profit supporting Ethereum",
    "email": "info@ethereum.org",
    "image": "ipfs://Qm...",
    "url": "https://ethereum.foundation"
  }
}
```

## Image Upload Mutations

### uploadImage

Upload a base64-encoded image:

```graphql
mutation UploadImage($input: UploadImageInput!) {
  uploadImage(input: $input) {
    hash
    url
    size
    mime_type
  }
}
```

### uploadImageFromUrl

Upload an image from a URL:

```graphql
mutation UploadImageFromUrl($url: String!) {
  uploadImageFromUrl(url: $url) {
    hash
    url
    size
    mime_type
  }
}
```

### uploadJsonToIpfs

Upload JSON metadata:

```graphql
mutation UploadJsonToIpfs($json: JSON!) {
  uploadJsonToIpfs(json: $json) {
    hash
    url
    size
  }
}
```

## Complete Workflow Example

Here's how to prepare metadata for atom creation:

```typescript
import { GraphQLClient } from 'graphql-request'
import { API_URL_PROD } from '@0xintuition/graphql'
import { createMultivaultClient } from '@0xintuition/sdk'

const graphqlClient = new GraphQLClient(API_URL_PROD)

// Step 1: Upload image to IPFS (via GraphQL)
const imageResult = await graphqlClient.request(`
  mutation UploadImageFromUrl($url: String!) {
    uploadImageFromUrl(url: $url) {
      url
    }
  }
`, { url: 'https://example.com/logo.png' })

// Step 2: Upload metadata to IPFS (via GraphQL)
const metadataResult = await graphqlClient.request(`
  mutation PinThing($thing: PinThingInput!) {
    pinThing(thing: $thing) {
      hash
    }
  }
`, {
  thing: {
    name: 'My Project',
    description: 'Description of my project',
    image: imageResult.uploadImageFromUrl.url,
    url: 'https://example.com'
  }
})

// Step 3: Create atom on-chain (via SDK)
const multivault = createMultivaultClient(walletClient)
const atomId = await multivault.createAtom({
  uri: `ipfs://${metadataResult.pinThing.hash}`
})
```

## Best Practices

### 1. Complete Metadata
Provide comprehensive metadata for better discoverability:

```typescript
const thing = {
  name: 'Project Name',           // Required
  description: 'Full description', // Recommended
  image: 'ipfs://...',            // Recommended
  url: 'https://...'              // Optional
}
```

### 2. Use IPFS URLs
Always reference images using IPFS URLs for permanence:

```typescript
// Good - permanent
image: 'ipfs://QmXnnyufdzAWL5CqZ2RnSNgPbvCc1ALT73s6epPrRnZ1Xy'

// Avoid - may change
image: 'https://example.com/image.png'
```

### 3. Error Handling

```typescript
try {
  const result = await graphqlClient.request(UPLOAD_IMAGE, { input })
  console.log('Uploaded:', result.uploadImage.url)
} catch (error) {
  if (error.message.includes('File too large')) {
    console.error('Image exceeds size limit')
  } else if (error.message.includes('Invalid')) {
    console.error('Invalid image format')
  }
}
```

### 4. Size Limits

| Upload Type | Maximum Size |
|-------------|--------------|
| Image (base64) | 5 MB |
| Image from URL | 10 MB |
| JSON | 1 MB |

## TypeScript Integration

Use the `@0xintuition/graphql` package for type-safe mutations:

```typescript
import {
  usePinThingMutation,
  useUploadImageFromUrlMutation
} from '@0xintuition/graphql'

function CreateAtomForm() {
  const [pinThing] = usePinThingMutation()
  const [uploadImage] = useUploadImageFromUrlMutation()

  const handleSubmit = async (data: FormData) => {
    // Upload image first
    const imageResult = await uploadImage({
      variables: { url: data.imageUrl }
    })

    // Then pin metadata
    const thingResult = await pinThing({
      variables: {
        thing: {
          name: data.name,
          description: data.description,
          image: imageResult.data.uploadImageFromUrl.url,
          url: data.url
        }
      }
    })

    // Use the IPFS hash for atom creation
    const ipfsUri = `ipfs://${thingResult.data.pinThing.hash}`
    // ... create atom via SDK
  }

  return <form onSubmit={handleSubmit}>...</form>
}
```

## Related Resources

- [PnL Queries](/docs/graphql-api/queries/pnl/overview) - Profit & Loss tracking
- [Chart Queries](/docs/graphql-api/queries/charts/overview) - Chart generation
- [SDK Documentation](/docs/intuition-sdk/installation-and-setup) - On-chain operations
- [GraphQL Reads](/docs/graphql-api/reads) - Query documentation
