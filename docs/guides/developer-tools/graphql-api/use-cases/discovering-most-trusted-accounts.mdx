---
id: discovering-most-trusted-accounts
title: Discovering Most Trusted Accounts
sidebar_label: Discovering Most Trusted Accounts
sidebar_position: 7
description: Step-by-step strategy for finding highly trusted accounts based on stake and activity
---

import GraphQLPlaygroundCustom from '@site/src/components/GraphQLPlaygroundCustom';

# Discovering the Most Trusted Accounts

Learn how to leverage the Intuition GraphQL API to find and rank the ecosystem's most trusted accounts based on their positions, stakes, and activity patterns.

## Understanding the Progression

- **Step 1**: Get top 20 accounts ranked by total shares across all positions, showing the most trusted accounts based on cumulative stakes.
- **Step 2**: Get detailed information for a given account including all positions and atoms created.
- **Step 3**: Find top 20 individual positions by share amount, showing which accounts hold the largest single stakes.

export const accountQueries = [
  {
    id: 'trusted-accounts',
    title: 'Step 1: Get Most Trusted Accounts',
    query: `query GetTrustedAccounts($limit: Int = 20) {
  accounts(
    limit: $limit
    order_by: [{ positions_aggregate: { sum: { shares: desc } } }]
    where: {
      positions_aggregate: {
        count: { predicate: { _gt: 0 } }
      }
    }
  ) {
    id
    label
    image
    positions_aggregate {
      aggregate {
        count
        sum {
          shares
        }
      }
    }
    positions(
      limit: 10
      order_by: [{ shares: desc }]
    ) {
      id
      shares
      created_at
      vault {
        term_id
        current_share_price
        market_cap
        term {
          atom {
            term_id
            label
            image
          }
        }
      }
    }
  }
}`,
    variables: {
      limit: 20
    }
  },
  {
    id: 'account-details',
    title: 'Step 2: Get Account Details',
    query: `query GetAccountDetails($accountId: String!) {
  accounts(where: { id: { _eq: $accountId } }) {
    id
    label
    image
    positions_aggregate {
      aggregate {
        count
        sum {
          shares
        }
      }
    }
    positions(
      limit: 50
      order_by: [{ shares: desc }]
    ) {
      id
      shares
      created_at
      vault {
        term_id
        current_share_price
        market_cap
        total_shares
        term {
          atom {
            term_id
            label
            image
            type
          }
          triple {
            term_id
            subject { label }
            predicate { label }
            object { label }
          }
        }
      }
    }
    atoms(order_by: [{ created_at: desc }]) {
      term_id
      label
      type
      created_at
    }
  }
}`,
    variables: {
      accountId: '0xbd2DE08aF9470c87C4475117Fb912B8f1d588D9c'
    }
  },
  {
    id: 'top-holders',
    title: 'Step 3: Top Position Holders',
    query: `query GetTopHolders($limit: Int = 20) {
  positions(
    limit: $limit
    order_by: [{ shares: desc }]
  ) {
    id
    shares
    created_at
    account {
      id
      label
      image
      positions_aggregate {
        aggregate {
          count
          sum {
            shares
          }
        }
      }
    }
    vault {
      term_id
      market_cap
      current_share_price
      term {
        atom {
          label
          image
        }
      }
    }
  }
}`,
    variables: {
      limit: 20
    }
  }
];

<GraphQLPlaygroundCustom queries={accountQueries} />
