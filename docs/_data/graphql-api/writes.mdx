---
id: writes
title: Writes
sidebar_label: Writes
sidebar_position: 3
description: Guide to write data using GraphQL mutations in the Intuition API
---

# Writes

## GraphQL Mutations

Our GraphQL API provides convenient mutations to help structure and publish Atom metadata following common schemas and best practices. While the protocol supports any URI scheme, these mutations offer an opinionated approach to creating well-structured, interoperable data.

:::info On-Chain Operations vs GraphQL Mutations
**Creating atoms, triples, and taking positions are smart contract operations**, not GraphQL mutations. Use the [Intuition SDK](/docs/intuition-sdk/quick-start) for on-chain operations.

GraphQL mutations are used for:
- **Pinning metadata to IPFS** (pinThing, pinPerson, pinOrganization)
- **Uploading images** (uploadImage, uploadImageFromUrl)
- **Uploading JSON to IPFS** (uploadJsonToIpfs)
- **Retrieving PnL data** (getAccountPnlCurrent, getAccountPnlChart, etc.)
- **Generating charts** (getChartJson, getChartSvg)
:::

## Available Mutations

| Mutation | Description | Documentation |
|----------|-------------|---------------|
| `pinThing` | Pin Thing metadata to IPFS | [Pin Thing](./mutations/pin-thing) |
| `pinPerson` | Pin Person metadata to IPFS | [Pin Person](./mutations/pin-person) |
| `pinOrganization` | Pin Organization metadata to IPFS | [Pin Organization](./mutations/pin-organization) |
| `uploadImage` | Upload base64 image to IPFS | [Upload Image](./mutations/upload-image) |
| `uploadImageFromUrl` | Upload image from URL to IPFS | [Upload Image from URL](./mutations/upload-image-from-url) |
| `uploadJsonToIpfs` | Upload arbitrary JSON to IPFS | [Upload JSON to IPFS](./mutations/upload-json-to-ipfs) |

## PnL Operations

These operations retrieve profit and loss data:

| Operation | Description | Documentation |
|-----------|-------------|---------------|
| `getAccountPnlCurrent` | Current PnL snapshot | [Account PnL Current](./queries/pnl/account-pnl-current) |
| `getAccountPnlChart` | PnL chart over time | [Account PnL Chart](./queries/pnl/account-pnl-chart) |
| `getAccountPnlRealized` | Realized PnL breakdown | [Account PnL Realized](./queries/pnl/account-pnl-realized) |
| `getPositionPnlChart` | Position-level PnL | [Position PnL Chart](./queries/pnl/position-pnl-chart) |

## Chart Operations

These operations generate chart data:

| Operation | Description | Documentation |
|-----------|-------------|---------------|
| `getChartJson` | Chart data as JSON | [Chart JSON](./queries/charts/chart-json) |
| `getChartRawJson` | Raw chart JSON | [Chart Raw JSON](./queries/charts/chart-raw-json) |
| `getChartSvg` | Chart as SVG | [Chart SVG](./queries/charts/chart-svg) |
| `getChartRawSvg` | Raw chart SVG | [Chart Raw SVG](./queries/charts/chart-raw-svg) |

## Pinning Metadata

### pinThing Mutation

Pin a "Thing" object (general entity) to IPFS:

```graphql
mutation pinThing(
  $name: String!
  $description: String
  $image: String
  $url: String
) {
  pinThing(
    thing: {
      name: $name,
      description: $description,
      image: $image,
      url: $url
    }
  ) {
    uri
  }
}
```

### Example Usage

```json
{
  "name": "Intuition Protocol",
  "description": "A decentralized trust protocol for the internet",
  "image": "https://intuition.systems/logo.png",
  "url": "https://intuition.systems"
}
```

The mutation returns an IPFS URI that can be used when creating an Atom:

```typescript
const { data } = await pinThing(thingVariables)
// data.pinThing.uri contains the IPFS URI
// Use this URI when creating atoms via the SDK
```

## Uploading Images

### uploadImage Mutation

Upload a base64-encoded image to IPFS:

```graphql
mutation UploadImage($image: String!) {
  uploadImage(image: $image) {
    url
    cid
  }
}
```

### uploadImageFromUrl Mutation

Upload an image from a URL to IPFS:

```graphql
mutation UploadImageFromUrl($url: String!) {
  uploadImageFromUrl(url: $url) {
    url
    cid
  }
}
```

## Uploading JSON

### uploadJsonToIpfs Mutation

Upload arbitrary JSON data to IPFS:

```graphql
mutation UploadJsonToIpfs($json: JSON!) {
  uploadJsonToIpfs(json: $json) {
    url
    cid
  }
}
```

## Example Workflow: Creating an Atom

Here's the complete workflow for creating an atom with metadata:

```typescript
import { useIntuition } from '@0xintuition/react'

// 1. Upload image first (if needed)
const uploadResult = await graphqlClient.mutate({
  mutation: UPLOAD_IMAGE_FROM_URL,
  variables: { url: 'https://example.com/image.png' }
})
const imageIpfsUrl = uploadResult.data.uploadImageFromUrl.url

// 2. Pin metadata to IPFS
const pinResult = await graphqlClient.mutate({
  mutation: PIN_THING,
  variables: {
    name: 'Example Thing',
    description: 'An example entity',
    image: imageIpfsUrl,
    url: 'https://example.com'
  }
})
const metadataUri = pinResult.data.pinThing.uri

// 3. Create atom on-chain using the SDK
const { createAtom } = useIntuition()
const atomId = await createAtom({
  uri: metadataUri
})
```

## Best Practices

### Complete Metadata
Provide as much relevant metadata as possible to improve the Atom's utility across different contexts.

### Persistent Storage
All metadata is stored on IPFS, ensuring data availability and immutability.

### URI Standards
Use standard URI formats:
- **IPFS**: `ipfs://Qm...`
- **HTTP(S)**: `https://...`

### Error Handling
Always handle potential errors in mutations:

```typescript
try {
  const result = await graphqlClient.mutate({
    mutation: PIN_THING,
    variables: thingData
  })
  console.log('Metadata pinned:', result.data.pinThing.uri)
} catch (error) {
  console.error('Failed to pin metadata:', error.message)
}
```

## TypeScript Integration

We maintain a package, `graphql` within our `intuition-ts` monorepo that auto-generates TypeScript types and React hooks to make integrations easier. This includes type-safe mutations, queries, and React hooks for all supported schemas.

### Using Generated Hooks

```typescript
import { usePinThingMutation } from '@0xintuition/graphql'

function CreateAtomComponent() {
  const [pinThing, { loading }] = usePinThingMutation()

  const handlePin = async (thingData: ThingData) => {
    try {
      const { data } = await pinThing({
        variables: { thing: thingData }
      })
      console.log('Pinned to:', data.pinThing.uri)
    } catch (error) {
      console.error('Failed to pin:', error)
    }
  }

  return (
    <button onClick={() => handlePin(thingData)} disabled={loading}>
      {loading ? 'Pinning...' : 'Pin Metadata'}
    </button>
  )
}
```

## Related Resources

- [GraphQL API Overview](/docs/graphql-api/overview)
- [GraphQL Reads](/docs/graphql-api/reads)
- [Intuition SDK](/docs/intuition-sdk/quick-start)
- [Intuition GraphQL Package Source](https://github.com/0xIntuition/intuition-ts/tree/main/packages/graphql)
